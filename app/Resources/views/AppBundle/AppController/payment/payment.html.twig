{% block head %}
<head>
    {{ block('meta', template) }}

    <title>{{ block('title', template) }}</title>

    <!-- App stylesheets -->
    <link href="{{ asset('css/gsdk-bootstrap-wizard.css') }}" rel="stylesheet" />
    <link href="{{ asset('css/animate.css') }}" rel="stylesheet" />

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="76x76" href="{{ asset('img/apple-icon.png') }}">
    <link rel="icon" type="image/png" href="{{ asset('img/favicon.png') }}">
</head>
{% endblock %}

{% block stylesheets_invoice %}
<style>
    html, body {
        height: 100%;
    }

    body {
        padding: 0;
        margin: 0;
        display: -webkit-box;
        display: -moz-box;
        display: box;
        display: -webkit-flex;
        display: -moz-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
        -moz-box-pack: center;
        box-pack: center;
        -webkit-justify-content: center;
        -moz-justify-content: center;
        -ms-justify-content: center;
        -o-justify-content: center;
        justify-content: center;
        -ms-flex-pack: center;
        -webkit-box-align: start;
        -moz-box-align: start;
        box-align: start;
        -webkit-align-items: flex-start;
        -moz-align-items: flex-start;
        -ms-align-items: flex-start;
        -o-align-items: flex-start;
        align-items: flex-start;
        -ms-flex-align: start;
        background-color: #fff;
        font-family: "Roboto Condensed", sans-serif;
    }
    @media (min-height: 580px) {
        body {
            -webkit-box-align: center;
            -moz-box-align: center;
            box-align: center;
            -webkit-align-items: center;
            -moz-align-items: center;
            -ms-align-items: center;
            -o-align-items: center;
            align-items: center;
            -ms-flex-align: center;
        }
    }

    .container {
        width: 100%;
        max-width: 420px;
        padding-right: 20px;
        padding-left: 20px;
    }

    .invoice {
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 14px 28px rgba(0, 0, 0, 0.1), 0 10px 10px rgba(0, 0, 0, 0.13);
        margin: 50px -350px;
        padding: 50px 45px 30px;
    }
    .invoice header {
        overflow: hidden;
        margin-bottom: 10px;
    }
    .invoice header section:nth-of-type(1) {
        float: left;
    }
    .invoice header section:nth-of-type(1) h1 {
        text-transform: uppercase;
        font-weight: 600;
        letter-spacing: 2px;
        color: #344760;
        font-size: 25px;
        margin-top: 0;
        margin-bottom: 5px;
    }
    .invoice header section:nth-of-type(1) span {
        color: #b7bcc3;
        font-size: 14px;
        letter-spacing: 2px;
    }
    .invoice header section:nth-of-type(2) {
        float: right;
    }
    .invoice header section:nth-of-type(2) span {
        font-size: 21px;
        color: #b7bcc3;
        letter-spacing: 1px;
    }
    .invoice header section:nth-of-type(2) span:before {
        content: "#";
    }
    .invoice main {
        border: 1px dashed #b7bcc3;
        border-left-width: 0px;
        border-right-width: 0px;
        padding-top: 30px;
        padding-bottom: 30px;
    }
    .invoice main section {
        overflow: hidden;
    }
    .invoice main section span {
        float: left;
        color: #344760;
        font-size: 16px;
        letter-spacing: .5px;
    }
    .invoice main section span:nth-of-type(1) {
        width: 45%;
        margin-right: 5%;
    }
    .invoice main section span:nth-of-type(2) {
        width: 22.5%;
        margin-right: 5%;
    }
    .invoice main section span:nth-of-type(2), .invoice main section span:nth-of-type(3) {
        text-align: right;
    }
    .invoice main section span:nth-of-type(3) {
        width: 22.5%;
    }
    .invoice main section:nth-of-type(1) {
        margin-bottom: 30px;
    }
    .invoice main section:nth-of-type(1) span {
        color: #b7bcc3;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 13px;
    }
    .invoice main section:nth-of-type(2) {
        margin-bottom: 30px;
    }
    .invoice main section:nth-of-type(2) figure {
        overflow: hidden;
        margin: 0;
        margin-bottom: 20px;
        line-height: 160%;
    }
    .invoice main section:nth-of-type(2) figure:last-of-type {
        margin-bottom: 0;
    }
    .invoice main section:nth-of-type(3) span:nth-of-type(1) {
        width: 72.5%;
        font-weight: bold;
    }
    .invoice main section:nth-of-type(3) span:nth-of-type(2) {
        margin-right: 0 !important;
    }
    .invoice footer {
        text-align: right;
        margin-top: 30px;
    }
    .invoice footer a {
        font-size: 19px;
        font-weight: bold;
        text-decoration: none;
        text-transform: uppercase;
        position: relative;
        letter-spacing: 1px;
    }
    .invoice footer a:after {
        content: "";
        width: 0%;
        height: 4px;
        position: absolute;
        right: 0;
        bottom: -10px;
        background-color: inherit;
        -webkit-transition: width 0.2s ease-in-out;
        -moz-transition: width 0.2s ease-in-out;
        transition: width 0.2s ease-in-out;
    }
    .invoice footer a:hover:after {
        width: 100%;
    }
    .invoice footer a:nth-of-type(1) {
        color: #b7bcc3;
        margin-right: 30px;
    }
    .invoice footer a:nth-of-type(1):after {
        background-color: #b7bcc3;
    }
    .invoice footer a:nth-of-type(2) {
        color: #fe8888;
    }
    .invoice footer a:nth-of-type(2):after {
        background-color: #fe8888;
    }
    .pdf {
        display: inline-block;
        width: 100%;
        padding: 19px;
        border: 0;
        border-radius: 5px;
        border-color: #fff;
        background: #eea560;
        color: white;
        font-size: 1.4em;
    }
</style>
{% endblock %}

<body class="image-container">
<div class="container animated fadeIn">
    <div class="invoice">
        <header>
            {% for billet in reservation.billets %}
            {% if loop.length == 1 %}
            <section>
                <h1>Réservation - Votre billet</h1>
                <span>{{ reservation.dateReservation|date('d/m/Y') }}</span>
            </section>

            <section>
                <span>{{ reservation.codeReservation|slice(8,21) }}</span>
            </section>
        </header>

        <main>
            <section>
                <span>Informations</span>
            </section>

            <section>
                <figure>
                    <span>Demi-journée</span>
                    <span> </span>
                    <span>{% if reservation.demiJournee == true %}✔️{% else %}❌{% endif %}</span>
                </figure>

                <figure>
                    <span>Adresse mail</span>
                    <span> </span>
                    <span>{{ reservation.email }}</span>
                </figure>

                <figure>
                    <span>Nom</span>
                    <span> </span>
                    <span>{{ billet.nom }}</span>
                </figure>

                <figure>
                    <span>Prénom</span>
                    <span> </span>
                    <span>{{ billet.prenom }}</span>
                </figure>

                <figure>
                    <span>Date de naissance</span>
                    <span> </span>
                    <span>{{ billet.dateNaissance|date('d/m/Y') }}</span>
                </figure>

                <figure>
                    <span>Réduction</span>
                    <span> </span>
                    <span>{% if billet.reduction == true %}✔️{% else %}❌{% endif %}</span>
                </figure>
            </section>

            <section>
                <span>Prix TTC</span>
                <span>{{ reservation.prix }} EUR (€)</span>
            </section>
        </main>

        <footer>
            <a></a>
        </footer>
        {% else %}
        <div id="head-parent">
            <script>
                var dateBillet = "{{ reservation.dateReservation|date('d/m/Y') }}";
                var codeResa = "{{ reservation.codeReservation|slice(8,21) }}";
                var html = "<header class=\"header\" style=\"margin-bottom: 45px;\"><section><h1>Réservation - Vos billets</h1><span>" + dateBillet + "</span></section><section><span>" + codeResa + "</span></section></header><table class=\"table\"><thead class=\"thead-default\"><tr><th>Demi-journée</th><th>Adresse mail</th><th>Nom</th><th>Prénom</th><th>Date de naissance</th><th>Réduction</th></tr></thead>";
                $("#head-parent").html(html);
            </script>
            <tbody>
                <tr>
                    <th>{% if reservation.demiJournee == true %}✔️{% else %}❌{% endif %}</th>
                    <td>{{ reservation.email }}</td>
                    <td>{{ billet.nom }}</td>
                    <td>{{ billet.prenom }}</td>
                    <td>{{ billet.dateNaissance|date('d/m/Y') }}</td>
                    <td>{% if billet.reduction == true %}✔️{% else %}❌{% endif %}</td>
                </tr>
            </tbody></table><br>
        </div>
        {% endif %}
        {% endfor %}
        <form method="post">
            <script
                    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key="pk_test_46o7fg2iwKoCUn1BlH0fUuly"
                    data-amount="{{ reservation.prix|number_format(2, '', '') }}"
                    data-name="Réservation du {{ reservation.dateReservation|date('d/m/Y') }}"
                    data-description="Musée du Louvre - Paris"
                    data-image="{{ asset('img/louvre_logo_lite.png') }}"
                    data-locale="auto"
                    data-zip-code="false"
                    data-currency="eur">
            </script>
            {# custom css for the default Stripe btn style #}
            <script type="text/javascript">
                $(document).ready(function(){
                    $(".stripe-button-el span").remove();
                    $("button.stripe-button-el").removeAttr('style').css({
                        "display":"inline-block",
                        "width":"100%",
                        "padding":"15px",
                        "background":"#eea560",
                        "color":"white",
                        "font-size":"1.3em"
                    }).html("Paiement par carte bancaire " + {{ reservation.prix }} + " EUR (€)");
                });
            </script>
        </form>
    </div>
</div>
</body>